{"version":3,"sources":["constants/index.js","components/LayoutShards/index.js","components/LayoutShards/Header/index.jsx","components/LayoutShards/SubHeader/index.jsx","components/LayoutShards/Article/index.jsx","components/LayoutShards/Footer/index.jsx","hocs/dnd/constants.js","utils/index.js","hocs/dnd/index.js","hocs/dnd/dragSource.js","hocs/dnd/dropTarget.js","components/LayoutDesk/DropTargetItem/index.jsx","components/LayoutDesk/index.jsx","containers/LayoutsList/index.jsx","components/LeftMenu/index.jsx","containers/LayoutEditor/index.jsx","reducers/layoutsListReducer.js","reducers/index.js","createStore.js","App.jsx","serviceWorker.js","index.js"],"names":["Actions","Header","props","className","data-componentid","SubHeader","Article","rest","classNames","Footer","MODE","CUT","COPY","generateId","Math","random","toString","substr","dragSource","WrappedComponent","handleDragStartEvent","bind","event","dataTransfer","setData","target","id","draggable","onDragStart","this","React","Component","dropTarget","options","mode","state","isDragHover","hasContent","sourceId","handleDargOverEvent","handleDropEvent","handleDragEnterEvent","handleDragLeaveEvent","preventDefault","effectAllowed","data","getData","nodeCopy","document","getElementById","cloneNode","appendChild","setState","onDrop","onDragOver","onDragEnter","onDragLeave","CONSTANTS","DnD","DropTargetItem","containerRef","createRef","prevProps","onDropEvent","current","children","getAttribute","containerClassName","ref","defaultProps","LayoutDesk","getDropTargetItem","index","componentId","layout","shardsList","updateLayout","slice","handleRemoveClick","removeIndex","floor","filter","s","i","narrowViewOnly","reduce","acc","value","map","key","LayoutShard","LayoutShards","onClick","LayoutsList","handleLayoutClick","history","push","handleDeleteButton","stopPropagation","removeLayout","layouts","compose","withRouter","connect","layoutsList","dispatch","type","payload","LeftMenu","title","LayoutEditor","handleUpdateLayout","match","params","layoutId","newId","createLayout","replace","Object","keys","ownProps","find","initialState","combineReducers","action","store","createStore","rootReducer","window","__REDUX_DEVTOOLS_EXTENSION__","App","AppBar","position","Toolbar","Typography","variant","to","exact","path","Boolean","location","hostname","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.83946bb4.chunk.js","sourcesContent":["export const Actions = {\n    CREATE_LAYOUT: 'CREATE_LAYOUT',\n    UPDATE_LAYOUT: 'UPDATE_LAYOUT',\n    REMOVE_LAYOUT: 'REMOVE_LAYOUT',\n};\n","import { Header } from './Header';\nimport { Footer } from './Footer';\nimport { Article } from './Article';\nimport { SubHeader } from './SubHeader';\n\nexport default {\n    Header,\n    SubHeader,\n    Article,\n    Footer,\n};\n","import React from 'react';\n\nimport './styles.scss';\n\nexport function Header(props) {\n    return (\n        <div className=\"sc-header\" data-componentid=\"Header\" {...props}>Header</div>\n    );\n}\n","import React from 'react';\n\nimport './styles.scss';\n\nexport function SubHeader(props) {\n    return (\n        <div className=\"sc-subheader\" data-componentid=\"SubHeader\" {...props}>SubHeader</div>\n    );\n}\n","import React from 'react';\nimport classNames from 'classnames';\n\nimport './styles.scss';\n\nexport function Article(props) {\n    const { className, ...rest } = props;\n\n    return (\n        <div className={classNames('sc-article', className)} data-componentid=\"Article\" {...rest}>Article</div>\n    );\n}\n","import React from 'react';\n\nimport './styles.scss';\n\nexport function Footer(props) {\n    return (\n        <div className=\"sc-footer\" data-componentid=\"Footer\" {...props}>Footer</div>\n    );\n}\n","export const MODE = {\n    CUT: 'cut',\n    COPY: 'copy',\n};\n","export const generateId = () => '_' + Math.random().toString(36).substr(2, 9);\n","import { dragSource } from './dragSource';\nimport { dropTarget } from './dropTarget';\nimport * as CONSTANTS from './constants';\n\nexport default {\n    dragSource,\n    dropTarget,\n    CONSTANTS,\n};\n","import React from 'react';\n\nexport function dragSource(WrappedComponent) {\n\n    return class extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.handleDragStartEvent = this.handleDragStartEvent.bind(this);\n        }\n\n        handleDragStartEvent(event) {\n            event.dataTransfer.setData('id', event.target.id);\n        }\n  \n        render() {\n            return (\n                <WrappedComponent\n                    draggable\n                    onDragStart={this.handleDragStartEvent}\n                    {...this.props}\n                />\n            );\n        }\n    };\n}\n","import React from 'react';\nimport { MODE } from './constants';\nimport { generateId } from '../../utils';\n\nexport function dropTarget(WrappedComponent, options = { mode: MODE.CUT }) {\n    const { mode } = options;\n\n    return class extends React.Component {\n        constructor(props) {\n            super(props)\n\n            this.state = {\n                isDragHover: false,\n                hasContent: false,\n                sourceId: generateId(),\n            };\n            this.handleDargOverEvent = this.handleDargOverEvent.bind(this);\n            this.handleDropEvent = this.handleDropEvent.bind(this);\n            this.handleDragEnterEvent = this.handleDragEnterEvent.bind(this);\n            this.handleDragLeaveEvent = this.handleDragLeaveEvent.bind(this);\n        }\n\n        handleDargOverEvent(event) {\n            // allow drop\n            event.preventDefault();\n            event.dataTransfer.effectAllowed = mode;\n        }\n    \n        handleDropEvent(event) {\n            event.preventDefault();\n            const data = event.dataTransfer.getData('id');\n            const { sourceId } = this.state;\n\n            switch(mode) {\n                case MODE.COPY: {\n                    const nodeCopy = document.getElementById(data).cloneNode(true);\n                    nodeCopy.id = sourceId;\n        \n                    event.target.appendChild(nodeCopy);\n                    break;\n                }\n                case MODE.CUT:\n                default: {\n                    event.target.appendChild(document.getElementById(data));\n                }\n            }\n            \n\n            this.setState({ isDragHover: false, hasContent: true });\n        }\n\n        handleDragEnterEvent(event) {\n            this.setState({ isDragHover: true });\n        }\n\n        handleDragLeaveEvent() {\n            this.setState({ isDragHover: false });\n        }\n  \n        render() {\n            const { isDragHover, hasContent, sourceId } = this.state;\n\n            return (\n                <WrappedComponent\n                    onDrop={this.handleDropEvent}\n                    onDragOver={this.handleDargOverEvent}\n                    onDragEnter={this.handleDragEnterEvent}\n                    onDragLeave={this.handleDragLeaveEvent}\n                    isDragHover={isDragHover}\n                    hasContent={hasContent}\n                    sourceId={sourceId}\n                    {...this.props}\n                />\n            );\n        }\n    };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\n\nimport './styles.scss';\nimport { DnD } from '../../../hocs';\n\nconst { dropTarget, CONSTANTS: { MODE } } = DnD;\n\nclass DropTargetItem extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.containerRef = React.createRef();\n    }\n\n    componentDidUpdate(prevProps) {\n        const { hasContent, onDropEvent } = this.props;\n\n        if (hasContent && !prevProps.hasContent && onDropEvent) {\n            const componentId = this.containerRef.current.children[1].getAttribute('data-componentid');\n\n            onDropEvent(componentId);\n        }\n    }\n\n    render() {\n        const {\n            isDragHover,\n            hasContent,\n            onDropEvent,\n            sourceId,\n            children,\n            ...rest\n        } = this.props;\n        const containerClassName = classNames(\n            'drop-target-item',\n            {\n                'is-drag-hover': isDragHover,\n                'has-content': hasContent || !!children,\n            },\n        );\n    \n        return (\n            <div ref={this.containerRef} className={containerClassName} {...rest}>\n                <AddCircleOutlineIcon />\n                {children}\n            </div>\n        );\n    }\n}\n\nDropTargetItem.propTypes = {\n    id: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.number,\n      ]).isRequired,\n    sourceId: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.number,\n      ]).isRequired,\n    isDragHover: PropTypes.bool,\n    hasContent: PropTypes.bool,\n    onDropEvent: PropTypes.func,\n    children: PropTypes.node,\n};\n\nDropTargetItem.defaultProps = {\n    isDragHover: false,\n    hasContent: false,\n    onDropEvent: null,\n};\n\nexport default dropTarget(DropTargetItem, { mode: MODE.COPY });\n","import React, { Fragment } from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport LayoutShards from '../../components/LayoutShards';\nimport DropTargetItem from './DropTargetItem';\nimport { generateId } from '../../utils';\nimport './styles.scss';\n\nclass LayoutDesk extends React.Component {\n    getDropTargetItem = (children, index) => (\n        <DropTargetItem id={generateId()} onDropEvent={this.handleDropEvent(index)}>\n            {children}\n        </DropTargetItem>\n    );\n\n    handleDropEvent = (index) => (componentId) => {\n        const { id, shardsList } = this.props.layout;\n\n        this.props.updateLayout(id, [...shardsList.slice(0, index), componentId, ...shardsList.slice(index)]);\n    };\n\n    handleRemoveClick = (index) => () => {\n        const { id, shardsList } = this.props.layout;\n        const removeIndex = Math.floor(index / 2);\n        \n        this.props.updateLayout(id, shardsList.filter((s, i) => i !== removeIndex));\n    };\n\n    render() {\n        const { layout: { shardsList }, narrowViewOnly } = this.props;\n\n        return (\n            <div className={classNames('layout-desk', { 'narrow-view': narrowViewOnly })}>\n                {!narrowViewOnly && shardsList\n                    .reduce((acc, value) => [...acc, value, 'add-bar'], ['add-bar'])\n                    .map((componentId, index) => {\n                        if (componentId === 'add-bar') {\n                            return (\n                                <Fragment key={generateId()}>\n                                    {this.getDropTargetItem(null, Math.floor(index / 2))}\n                                </Fragment>\n                            );\n                        }\n\n                        const LayoutShard = LayoutShards[componentId];\n\n                        return (\n                            <div key={index} className=\"layout-shard\" onClick={this.handleRemoveClick(index)}>\n                                <div className=\"shard-overlay\" />\n                                <LayoutShard />\n                            </div>\n                        );\n                    })\n                }\n                {\n                    narrowViewOnly && shardsList.map((componentId, index) => {\n                        const LayoutShard = LayoutShards[componentId];\n\n                        return (<LayoutShard key={index} />);\n                    })\n                }\n            </div>\n        );\n    }\n}\n\nLayoutDesk.propTypes = {\n    layout: PropTypes.shape({\n        id: PropTypes.string,\n        shardsList: PropTypes.array,\n    }),\n    updateLayout: PropTypes.func,\n    narrowViewOnly: PropTypes.bool,\n};\n\nLayoutDesk.defaultProps = {\n    layout: { shardsList: [] },\n    narrowViewOnly: false,\n};\n\nexport default LayoutDesk;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\nimport AddSharp from '@material-ui/icons/AddSharp';\nimport DeleteIcon from '@material-ui/icons/Delete';\n\nimport { Actions } from '../../constants';\nimport LayoutDesk from '../../components/LayoutDesk';\n\nimport './styles.scss';\n\nclass LayoutsList extends React.Component {\n    handleLayoutClick = (id) => () => {\n        this.props.history.push(`/edit/${id}`);\n    };\n\n    handleDeleteButton = (id) => (event) => {\n        event.stopPropagation();\n        this.props.removeLayout(id);\n    };\n\n    render() {\n        const { layouts } = this.props;\n\n        return (\n            <div className=\"layouts-list\">\n                <div className=\"title\">{\"Layouts Screen\"}</div>\n                <div className=\"content\">\n                    <div className=\"layout add-item\" onClick={this.handleLayoutClick('new')}>\n                        <AddSharp className=\"add-icon\" />\n                    </div>\n                    {\n                        layouts.map((layout) => {\n                            return (\n                                <div key={layout.id} className=\"layout\" onClick={this.handleLayoutClick(layout.id)}>\n                                    <div className=\"delete-button\" onClick={this.handleDeleteButton(layout.id)}>\n                                        <DeleteIcon />\n                                    </div>\n                                    <LayoutDesk layout={layout} narrowViewOnly />\n                                </div>\n                            );\n                        })\n                    }\n                </div>\n            </div>\n        );\n    }\n}\n\nLayoutsList.propTypes = {\n    layouts: PropTypes.arrayOf(PropTypes.shape({\n        id: PropTypes.string,\n        shardsList: PropTypes.arrayOf(PropTypes.string),\n    }))\n};\n\nconst mapStateToProps = (state) => {\n    return {\n        layouts: state.layoutsList.layouts,\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        removeLayout: (id) => dispatch({ type: Actions.REMOVE_LAYOUT, payload: { id } }),\n    }\n};\n\nexport default compose(\n    withRouter,\n    connect(mapStateToProps, mapDispatchToProps),\n)(LayoutsList);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport './styles.scss';\n\nconst LeftMenu = ({ title, children }) => {\n    return (\n        <aside className=\"left-menu\">\n            <div className=\"title\">{title}</div>\n            <div className=\"content\">{children}</div>\n        </aside>\n    );\n};\n\nLeftMenu.propTypes = {\n    title: PropTypes.string.isRequired,\n    children: PropTypes.node,\n};\n\nexport default LeftMenu;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { compose } from 'redux';\nimport { connect } from 'react-redux';\nimport { withRouter } from 'react-router-dom';\n\nimport { DnD } from '../../hocs';\nimport LeftMenu from '../../components/LeftMenu';\nimport LayoutDesk from '../../components/LayoutDesk';\nimport LayoutShards from '../../components/LayoutShards';\nimport { generateId } from '../../utils';\nimport { Actions } from '../../constants';\nimport './styles.scss';\n\nconst { dragSource } = DnD;\n\nclass LayoutEditor extends React.Component {\n    handleUpdateLayout = (id, shardsList) => this.props.updateLayout(id, shardsList);\n\n    componentDidMount() {\n        const { layout } = this.props;\n        const { layoutId } = this.props.match.params;\n\n        if (layoutId === 'new' || !layout) {\n            const newId = generateId();\n\n            this.props.createLayout(newId);\n            this.props.history.replace(`/edit/${newId}`);\n        }\n    }\n\n    render() {\n        const { layout } = this.props;\n        \n        return (\n            <div className=\"layout-editor\">\n                <LeftMenu title=\"Components\">\n                    <ul className=\"components-list\">\n                        {\n                            Object.keys(LayoutShards).map((key) => {\n                                const LayoutShard = dragSource(LayoutShards[key]);\n\n                                return (\n                                    <li key={key}>\n                                        <LayoutShard id={`sc-${key}`} />\n                                    </li>\n                                );\n                            })\n                        }\n                    </ul>\n                </LeftMenu>\n                <section className=\"container\">\n                    <div className=\"title\">{\"Configuration Screen\"}</div>\n                    <LayoutDesk layout={layout} updateLayout={this.handleUpdateLayout} />\n                </section>\n            </div>\n        );\n    }\n}\n\nLayoutEditor.propTypes = {\n    layout: PropTypes.shape({\n        id: PropTypes.string,\n        shardsList: PropTypes.arrayOf(PropTypes.string),\n    }),\n    createLayout: PropTypes.func.isRequired,\n    updateLayout: PropTypes.func.isRequired,\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    const { layoutId } = ownProps.match.params;\n\n    return {\n        layout: state.layoutsList.layouts.find(({ id }) => id === layoutId),\n    }\n};\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        createLayout: (id) => dispatch({ type: Actions.CREATE_LAYOUT, payload: { id } }),\n        updateLayout: (id, shardsList) => dispatch({ type: Actions.UPDATE_LAYOUT, payload: { id, shardsList } }),\n    }\n};\n\nexport default compose(\n    withRouter,\n    connect(mapStateToProps, mapDispatchToProps),\n)(LayoutEditor);\n","import { Actions } from '../constants';\n\nconst initialState = {\n  layouts: [],\n};\n\nexport default function(state = initialState, action) {\n    const { type, payload } = action;\n\n    switch (type) {\n        case Actions.CREATE_LAYOUT: {\n            const newId = payload.id;\n\n            return {\n                ...state,\n                layouts: [...state.layouts, { id: newId, shardsList: [] }],\n            };\n        }\n\n        case Actions.UPDATE_LAYOUT: {\n            const layouts = state.layouts.map((layout) => {\n                const { id, shardsList } = payload;\n\n                if (layout.id === id) {\n                    return { id, shardsList };\n                }\n\n                return layout;\n            });\n\n            return { ...state, layouts };\n        }\n\n        case Actions.REMOVE_LAYOUT: {\n            const layouts = state.layouts.filter(({ id }) => id !== payload.id);\n\n            return { ...state, layouts };\n        }\n\n        default:\n            return state;\n    }\n}\n","import { combineReducers } from 'redux';\nimport layoutsList from './layoutsListReducer';\n\nexport default combineReducers({\n    layoutsList,\n});\n","import { createStore } from 'redux';\nimport rootReducer from './reducers';\n\n/* eslint-disable no-underscore-dangle */\nconst store = createStore(\n    rootReducer,\n    window.__REDUX_DEVTOOLS_EXTENSION__ && window.__REDUX_DEVTOOLS_EXTENSION__(),\n);\n/* eslint-enable */\n\nexport default store;\n","import React from 'react';\nimport { HashRouter as Router, Route, Switch, Link } from 'react-router-dom';\nimport { Provider } from 'react-redux';\n\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\n\nimport LayoutsList from './containers/LayoutsList';\nimport LayoutEditor from './containers/LayoutEditor';\nimport store from './createStore';\nimport './App.scss';\n\nfunction App() {\n  return (\n    <Provider store={store}>\n      <Router>\n        <AppBar position=\"static\">\n          <Toolbar>\n            <Typography variant=\"h6\">\n              <Link className=\"app-header-link\" to=\"/\">Home</Link>\n            </Typography>\n          </Toolbar>\n        </AppBar>\n        <Switch>\n          <Route exact path=\"/\">\n            <LayoutsList />\n          </Route>\n          <Route path=\"/edit/:layoutId\">\n            <LayoutEditor />\n          </Route>\n          <Route>\n            {() => (<div>Page not found :(</div>)}\n          </Route>\n        </Switch>\n      </Router>\n    </Provider>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' }\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}